function expandAll(a){a.html("Collapse all").attr("data-state","expanded");$("#browse-results .collapse").each(function(){$(this).collapse("show");$("#browse-results .glyphicon-plus").addClass("glyphicon-minus").removeClass("glyphicon-plus")})}function collapseAll(a){a.html("Expand all").attr("data-state","collapsed");$("#browse-results .collapse").each(function(){$(this).collapse("hide");$("#browse-results .glyphicon-minus").addClass("glyphicon-plus").removeClass("glyphicon-minus")})}
$("#collapse-expand-all").on("click",function(a){"collapsed"==$(this).attr("data-state")?expandAll($(this)):"expanded"==$(this).attr("data-state")&&collapseAll($(this))});$(document).on("click",".browse-list__category-header > a",function(){$(this).find(".glyphicon").hasClass("glyphicon-plus")?$(this).find(".glyphicon").addClass("glyphicon-minus").removeClass("glyphicon-plus"):$(this).find(".glyphicon").hasClass("glyphicon-minus")&&$(this).find(".glyphicon").addClass("glyphicon-plus").removeClass("glyphicon-minus")});
var jumpMap={},count=0,prev,curr;$(".browse-list__category").each(function(){curr=$(this).attr("data-sort-letter");count+=1;curr!=prev&&(jumpMap[curr]=count);prev=curr});$(".jumplist__item").on("click",function(){paging.setPage(Math.ceil(jumpMap[$(this).attr("data-sort-letter")]/$(".browse-list__category").length));return!1});var listId=$("#browse-results"),categorizedResults=$("#browse-results > li");pagingOpts.onSelect=function(a){updatePage(listId,categorizedResults,this.slice);showPager(this.pages)};
var paging=$(".pagination").paging(totalHeadings,pagingOpts);paging.setOptions({onSelect:function(a){updatePage(listId,categorizedResults,this.slice);showPager(this.pages)}});function updatePage(a,b,c){b=b.slice(c[0],c[1]);collapseAll($("#collapse-expand-all"));a.empty();a.append(b)};
